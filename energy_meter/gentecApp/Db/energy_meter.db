#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBDEND


# gentecSLink.template
# Template database for Gentec S-Link Power & Energy Monitor
# Pete Owens - 14/7/2014
# DOUBLE CHANNEL
# substitutions:
# device  - device name
# port    - asyn port
# channel - channel (1/2)
# egu     - engineering unit (J/W)
# 
# ##############################################################################
# Software Version
#record(stringin, "$(device):ReadVersion") {
#  field(DESC, "Software Version")
#  field(DTYP, "stream")
#  field(INP, "@gnt.proto get_version $(port)")
#  field(SCAN, "10 second")
#}

################################################################################
# Reset the device
#
record(bo, "$(device):CmdReset") {
  field(DESC, "Reset")
  field(DTYP, "stream")
  field(OUT, "@gnt.proto reset $(port)")
  field(ZNAM, "Reset")
  field(FLNK, "$(device):Chk:Module:Fanout")
}

record(fanout, "$(device):Chk:Module:Fanout") {
  field(LNK1, "$(head1):CmdStart")
  field(SELM, "All")
  field(LNK2, "$(head2):CmdStart")
}

record(bo, "$(head1):CmdStart") {
  field(DESC, "Start")
  field(DTYP, "stream")
  field(OUT, "@gnt.proto start_acq(1) $(port)")
  field(ZNAM, "Start")
  field(PINI, "YES")
}

record(bo, "$(head2):CmdStart") {
  field(DESC, "Start")
  field(DTYP, "stream")
  field(OUT, "@gnt.proto start_acq(2) $(port)")
  field(ZNAM, "Start")
  field(PINI, "YES")
}

#record(bo, "$(device):Disable") {
#  field(DESC, "Disable records for channels")
#  field(VAL,"1")
#  field(PINI,"YES")
#  field(ZNAM, "0")
#  field(ONAM, "1")  
#}

#########
#record(bo, "$(device):Disable_on") {
#  field(DESC, "Disable records for channels")
#  field(OMSL,"closed_loop")
#  field(DOL,"0")
#  field(OUT,"$(device):Disable PP")
#}

#record(bo, "Disable_on_$(chn_dis_2)") {
#  field(DESC, "Disable records for channels")
#  field(OMSL,"closed_loop")
#  field(DOL,"2")
#  field(OUT,"SeqSelect.SELN PP") 
#}

#########
#record(bo, "$(device):Disable_off") {
#  field(DESC, "Disable records for channels")
#  field(OMSL,"closed_loop")
#  field(DOL,"1")
#  field(OUT,"$(device):Disable PP") 
#}

#! Further lines contain data used by VisualDCT
#! View(347,46,1.0)
#! Record("$(device):ReadVersion",460,368,0,0,"$(device):ReadVersion")
#! Record("$(device):CmdReset",460,134,0,0,"$(device):CmdReset")
#! Field("$(device):CmdReset.FLNK",16777215,1,"$(device):CmdReset.FLNK")
#! Link("$(device):CmdReset.FLNK","$(device):Chk:Module:Fanout")
#! Record("$(device):Chk:Module:Fanout",740,222,0,0,"$(device):Chk:Module:Fanout")
#! Field("$(device):Chk:Module:Fanout.LNK1",16777215,1,"$(device):Chk:Module:Fanout.LNK1")
#! Link("$(device):Chk:Module:Fanout.LNK1","$(head1):CmdStart")
#! Field("$(device):Chk:Module:Fanout.LNK2",16777215,1,"$(device):Chk:Module:Fanout.LNK2")
#! Link("$(device):Chk:Module:Fanout.LNK2","$(head2):CmdStart")
#! Record("$(head1):CmdStart",1800,154,0,0,"$(head1):CmdStart")
#! Record("$(head2):CmdStart",1800,374,0,0,"$(head2):CmdStart")
